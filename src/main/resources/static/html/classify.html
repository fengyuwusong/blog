<!DOCTYPE html>
<html lang="en">
<head>
    <!--<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">-->
    <meta charset="UTF-8">
    <title>分类管理</title>
    <!--网站图标-->
    <link rel="icon" type="image/x-icon" href="../img/favicon.ico">
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/form.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--解决IE低版本问题-->
    <!--[if lt IE9]>
    <script type="text/javascript" src="../../resources/js/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="table" id="vue-data">
    <template v-if="category!=null">
        <table class="table table-striped table-hover">
            <caption>分类管理</caption>
            <thead>
            <tr>
                <th>序号</th>
                <th>分类名</th>
                <th>描述</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr v-for="c in category">
                <td>{{c.id}}</td>
                <td>{{c.categoryName}}</td>
                <td>{{c.description}}</td>
                <td>
                    <span>
                        <a href="#myModal"
                           data-target="#myModal"
                           data-toggle="modal"
                           @click="getId(c.id)">
                        编辑
                        </a>
                    </span>
                    <!--<span>置顶</span>-->
                    <span class="delete" @click="getId(c.id)"><a href="#delete"
                                                                 data-target="#deleteModal"
                                                                 data-toggle="modal">删除</a></span>
                </td>
            </tr>
            </tbody>
        </table>

    </template>
    <!--所以执行了这里的方法-->
    <template v-else>
        正在加载中。。。
    </template>
    <button id="add" class="btn btn-default"
            data-target="#addModal"
            data-toggle="modal">添加
    </button>

    <div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="addModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="addModalLabel">
                        添加
                    </h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label for="categoryName" class="col-sm-2 control-label">分类名:</label>
                            <div class="col-sm-10">
                                <input type="text" name="categoryName" id="addCategoryName" class="form-control"
                                       placeholder="请输入新的分类名..."/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="description" class="col-sm-2 control-label">描述:</label>
                            <div class="col-sm-10">
                                <input type="text" name="description" id="addDescription" class="form-control"
                                       placeholder="请输入新的描述..."/>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                    </button>
                    <button type="button" class="btn btn-primary" @click="addCategory()">
                        提交
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>

    <!-- 模态框（Modal） -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        编辑
                    </h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label for="categoryName" class="col-sm-2 control-label">分类名:</label>
                            <div class="col-sm-10">
                                <input type="text" name="categoryName" id="categoryName" class="form-control"
                                       placeholder="请输入新的分类名..."/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="description" class="col-sm-2 control-label">描述:</label>
                            <div class="col-sm-10">
                                <input type="text" name="description" id="description" class="form-control"
                                       placeholder="请输入新的描述..."/>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                    </button>
                    <button type="button" class="btn btn-primary" @click="editCategory()">
                        提交更改
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>

    <!-- 删除窗口 -->
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title center" id="deleteModalLabel">
                        是否确定删除？
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="warning">如果已有相关分类文章则改分类不能被删除！</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                    </button>
                    <button type="button" class="btn btn-danger" @click="deleteCategory()">
                        删除
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
</div>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/vue/2.4.4/vue.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>    <!--解决手机上的显示问题-->
<script src="../js/classify.js"></script>
<script>
    $(function () {
        classify.init();
    });
</script>
</body>
</html>